generator client {
  referentialIntegrity = "prisma"
  provider             = "prisma-client-js"
  binaryTargets        = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_MYSQL")
}

generator js {
  provider = "prisma-client-js"
}

model Resource {
  id         String     @id @default(cuid())
  name       String
  path       String?
  url        String?
  fullName   String     @map("full_name")
  size       BigInt?    @default(0)
  type       Int
  suffix     String?    @db.VarChar(10)
  parentId   String?    @map("parent_id")
  remark     String?
  count      Int        @default(0)
  createTime DateTime   @default(now()) @map("create_time")
  creatorId  String     @map("creator_id")
  children   Resource[] @relation("rel_resource")
  parent     Resource?  @relation("rel_resource", fields: [parentId], references: [id])

  @@index(path)
  @@index(size)
  @@index(type)
  @@index(parentId)
  @@index([id, parentId])
  @@index(createTime)
  @@map("resource")
}

model Favorite {
  id         String @id @default(cuid())
  userId     String @map("user_id")
  resourceId String @map("resource_id")
  favoriteTime DateTime   @default(now()) @map("favorite_time")

  @@unique([userId, resourceId])
  @@index(resourceId)
  @@index([userId, resourceId])
  @@map("favorite")
}
